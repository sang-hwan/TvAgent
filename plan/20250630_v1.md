## 🚩 Android TV Agent 세부 개발 단계

> 마지막 업데이트: 2025-06-30

---

### ✅ 완료된 단계 및 작업 내용

**🔸 단계 1: 개발 환경 구축 및 초기 테스트 (완료)**

* 개발 도구 설정

  * Android Studio Meerkat Feature Drop (2024.3.2 Patch 1), VS Code 사용
  * Kotlin·Java 11 환경 설정
  * Gradle 8.14.2 및 라이브러리 관리 설정

* 프로젝트 초기 구성

  * 앱 모듈 기본 설정
  * 서비스·리시버·권한 정의(AndroidManifest.xml)
  * 앱 라이프사이클 관리 클래스 생성 및 로깅 초기화
  * 서비스 자동 실행 및 포어그라운드 알림 구현
  * BOOT\_COMPLETED 이벤트 처리 리시버 등록 및 테스트

* Android TV 에뮬레이터 환경 구축 및 초기 테스트

  * Android TV AVD 구성
  * 서비스 자동 실행 및 포어그라운드 알림 정상 동작 확인

---

**🔸 단계 2: 프로젝트 구조 세분화 및 상세 설계 (완료)**

* 패키지 구조 세분화

  * application (앱 라이프사이클 및 DI 초기화)
  * service (백그라운드 서비스 로직)
  * receiver (브로드캐스트 리시버)
  * network (통신 계층 관리)
  * parser (XML 및 JSON 데이터 파싱)
  * model (DTO 등 데이터 모델)
  * usecase (비즈니스 로직 처리)
  * util (공통 유틸리티 기능)
  * ui (디버깅 및 관리용 인터페이스)

---

### 🚧 단계 3: AP 서버 통신 구현 (예정)

* API 설계 및 명세화

  * TR-069 인터페이스 (CWMP)

    | 메서드                        | 요청 형식     | 응답 형식     | 설명        |
    | -------------------------- | --------- | --------- | --------- |
    | getParameterValues(names)  | XML 기반 요청 | XML 형식 응답 | 단말 상태 조회  |
    | setParameterValues(params) | XML 기반 요청 | XML 형식 응답 | 설정값 변경    |
    | reboot()                   | XML 기반 요청 | XML 형식 응답 | 원격 재부팅 명령 |

  * REST API (모니터링 및 페일오버)

    | 엔드포인트          | 메서드  | 페이로드 예시                                     | 설명           |
    | -------------- | ---- | ------------------------------------------- | ------------ |
    | /agent/report  | POST | deviceId, uptime, memory(total/free) 상태 데이터 | 상태 보고        |
    | /agent/command | GET  | -                                           | 서버 명령 수신     |
    | /agent/log     | POST | 로그 수준 및 메시지 데이터                             | 로그 전송(선택 사항) |

* TR-069 라이브러리 선정 및 연동 검토

* TR-069 클라이언트 실제 구현

* REST API 인터페이스 및 HTTPS 통신 구현

* XML 및 JSON 파싱 로직 구현 및 테스트

---

### 🚧 단계 4: Android TV 내 앱 연동 인터페이스 정의 (예정)

* 설치된 앱 목록 조회 기능 설계
* 앱 제어 및 상태 응답 기능 구현

---

### 🚧 단계 5: 명령 처리 로직 구현 (예정)

* 주요 로직 설계 및 클래스 구조

  * 서비스 실행 및 포어그라운드 알림, 정기 작업 수행 스케줄링
  * 명령 처리 로직(재부팅, 파라미터 설정 등 서버 명령 처리)
  * 상태 보고 로직(단말 상태 데이터 서버 전송)
  * XML 및 JSON 데이터 파싱 로직
  * 포어그라운드 서비스 알림 관리

* AP 서버 명령 수신 및 처리

* Android TV 앱 제어 및 상태 처리 로직

* 시스템 상태 정보 수집 및 보고 기능 구현

---

### 🚧 단계 6: 테스트 및 디버깅 (예정)

* 유닛 테스트 작성 및 수행
* 통합 테스트 환경 구축 및 실기기 테스트

---

### 🚧 단계 7: 목업 프로젝트 시연 준비 (예정)

* 시나리오 기반 시연 환경 구성
* 통신 흐름 및 기능 시연 문서 작성

---

### 📌 보조 앱 개발 계획 (선택 사항)

* Kotlin·Java 21, Gradle 8.12 기반 보조 앱 개발
* Agent와 보조 앱 간의 REST/XML 통신 구현
* 보조 앱 설정 제어 및 상태 제공 기능 구현 및 테스트

---

### 📌 향후 고려 및 보완사항

* 벤더 맞춤형 최적화 및 펌웨어 관리 로직 개선
* 지속적인 보안 강화 및 성능 최적화
* 모듈화 설계 유지 및 멀티모듈 아키텍처 전환 검토
