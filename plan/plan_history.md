# 변경 이력

> 마지막 업데이트: 2025-07-11

| 번호     | 변경일자       | 변경 항목                  | 변경 전                                                  | 변경 후                                                                                           | 비고             |
| ------ | ---------- | ---------------------- | ----------------------------------------------------- | ---------------------------------------------------------------------------------------------- | -------------- |
| **1**  | 2025‑06‑12 | 개발 환경 도구 명세화           | Android Studio                                        | Android Studio **Meerkat FD**<br>2024.3.2 Patch 1                                              | 세부 버전 명시       |
| **2**  | 2025‑06‑12 | 프로그래밍 언어 명시            | (명시 없음)                                               | **Kotlin, Java 21**                                                                            | 사용 언어 추가       |
| **3**  | 2025‑06‑12 | Gradle 버전 명시           | (명시 없음)                                               | **Gradle 8.12**                                                                                | 사용 버전 명시       |
| **4**  | 2025‑06‑13 | 프로젝트 명칭                | *중계 앱 개발 체계적 계획서*                                     | **Android TV Agent 개발 계획서**                                                                    | 대상 기기 명확화      |
| **5**  | 2025‑06‑13 | 통신 흐름 설명               | AP 서버 ↔ 중계 앱 ↔ 보조 앱                                   | AP 서버 ↔ Android TV Agent ↔ Android TV 내 앱                                                      | 보조 앱 제거        |
| **6**  | 2025‑06‑13 | 앱 연동 대상                | 보조 앱 중심                                               | Android TV 내 설치 앱 연동                                                                           | 구조 전환          |
| **7**  | 2025‑06‑13 | 단말 정보 수집 목적            | “벤더 최적화 고려” 포괄적 서술                                    | Android TV 단말 정보를 **ACS 전송**                                                                   | 목적 구체화         |
| **8**  | 2025‑06‑13 | 보조 앱 용어                | “단말” 등 혼용                                             | “Android TV”로 통일                                                                               | 용어 정비          |
| **9**  | 2025‑06‑13 | Gradle 버전 수정           | 8.12                                                  | **8.14.2**                                                                                     | 상향 조정          |
| **10** | 2025‑06‑13 | 플랫폼 명시                 | Android                                               | **Android TV**                                                                                 | 플랫폼 명확화        |
| **11** | 2025‑06‑13 | 단계별 개발 세부화             | 단계만 나열                                                | ‘개발 환경 구축 완료’ 등 **세부 작업 명시**                                                                   | 상세화            |
| **12** | 2025‑06‑13 | 진행/예정 단계 구분            | 목표만 나열                                                | **진행 중·예정** 구분                                                                                 | 계획 구체화         |
| **13** | 2025‑06‑13 | 보조 앱 계획 세분화            | 간략 언급                                                 | **환경 구축 → 통합 테스트** 단계 명시                                                                       | 선택 사항 세분화      |
| **14** | 2025‑06‑13 | 향후 고려사항                | 포괄적 언급                                                | 벤더별 최적화·모듈화 **명시**                                                                             | 유지보수 관점        |
| **15** | 2025‑06‑19 | Java 버전 변경             | Kotlin, Java 21                                       | Kotlin, **Java 11**                                                                            | 버전 하향          |
| **16** | 2025‑06‑19 | 신규 개발 단계               | AP 서버 통신(단계 2)                                        | **프로젝트 구조 세분화** 단계 추가                                                                          | 단계 조정          |
| **17** | 2025‑06‑19 | 에뮬레이터 환경               | (명시 없음)                                               | **Android TV 에뮬레이터** 구성·테스트                                                                    | 환경 세부화         |
| **18** | 2025‑06‑30 | 단계 1 세부화               | 항목 나열                                                 | ‘개발 도구 설정’ 등 **소제목화**                                                                          | 가독성            |
| **19** | 2025‑06‑30 | 프로젝트 구조 세분화            | 패키지 구조 계획(예정)                                         | **application, service, …** 등<br>확정                                                            | 완료 처리          |
| **20** | 2025‑06‑30 | 단계 3 세부화               | 세부 미정                                                 | **TR‑069·REST API** 명세 추가                                                                      | 통신 명세화         |
| **21** | 2025‑06‑30 | 단계 5 로직 세부화            | 클래스 구조(예정)                                            | **서비스 실행·명령 처리·상태 보고** 등<br>구조 명시                                                              | 설계 상세          |
| **22** | 2025‑06‑30 | 보조 앱 계획 보완             | 간략 명시                                                 | **REST/XML 통신**·개발 환경 명시                                                                       | 명확화            |
| **23** | 2025‑06‑30 | 향후 고려사항 보완             | 최적화 등 포괄                                              | **멀티모듈** 전환 검토 추가                                                                              | 확장성 확보         |
| **24** | 2025‑06‑30 | 에뮬레이터 항목 수정            | 환경 구축 + 초기 테스트                                        | **환경 구축만** 명시                                                                                  | 간소화            |
| **25** | 2025‑06‑30 | 데이터 파싱 수정              | XML + JSON                                            | **XML만** 파싱                                                                                    | 대상 축소          |
| **26** | 2025‑06‑30 | REST API 항목 삭제         | REST 포함                                               | **REST 전면 삭제**                                                                                 | 범위 축소          |
| **27** | 2025‑06‑30 | 보조 앱 통신 방식             | REST/XML 혼합                                           | **XML 전용**                                                                                     | 단순화            |
| **28** | 2025‑06‑30 | 멀티모듈 검토 삭제             | 검토 명시                                                 | **검토 항목 삭제**                                                                                   | 계획 축소          |
| **29** | 2025‑07‑02 | 프로젝트 트리 구조 문서화      | (명시 없음)                                               | **트리 구조 및 설명 추가**                                                                              | 구조 가시화         |
| **30** | 2025‑07‑02 | 단계 3 명칭·내용 변경          | AP 서버 통신 구현(메서드 중심)                                   | **TR‑069 초기 구현·Agent 정보 보고**<br>Inform/BOOT/BOOTSTRAP 이벤트·XML 파싱 등                             | 명칭·작업 상세화      |
| **31** | 2025‑07‑02 | 신규 개발 단계               | (명시 없음)                                               | **OTA 펌웨어 업데이트(ACS 기반)** 단계 추가                                                                 | 신규 단계          |
| **32** | 2025‑07‑02 | 단계 번호 재정렬              | 테스트(6)·시연(7)                                          | 테스트(7)·시연(8)                                                                                   | 단계 추가 반영       |
| **33** | 2025‑07‑02 | 보조 앱 통신 방식 변경          | REST/XML 혼합                                           | **XML 전용**                                                                                     | 간소화            |
| **34** | 2025‑07‑02 | 멀티모듈 항목 복원             | (명시 없음)                                               | **멀티모듈 전환 검토** 재추가                                                                             | 확장성 재반영        |
| **35** | 2025‑07‑02 | 단계 세부화·신규 단계           | 총 8단계                                                 | **총 12단계** (ACS 보고·OTA 등)                                                                      | 세분화            |
| **36** | 2025‑07‑02 | 상태 구분 추가               | ✅,🚧                                                  | ✅,🚧,⬜ **3‑단계**                                                                                | 상태 명확          |
| **37** | 2025‑07‑02 | 통신 방식 변경               | REST/XML 혼합                                           | **XML 단일**                                                                                     | 범위 축소          |
| **38** | 2025‑07‑02 | 향후 고려사항 변경             | 멀티모듈 검토 삭제                                            | **멀티모듈 검토** 재반영                                                                                | 확장성 재반영        |
| **39** | 2025‑07‑02 | 프로젝트 구조 세분화            | `model` 패키지 *(도메인 모델; 현재 미사용)*                        | `model.command` 패키지 추가<br>(TR069Command.kt 이동)                                                 | 패키지 세분화        |
| **40** | 2025‑07‑02 | 네트워크 클래스 메서드 세부화       | `TR069Client.kt` 메서드 개요<br>(inform, get, set, reboot) | 메서드 세부화<br>(sendInform, pollEmpty, sendResponse)                                               | 네트워크 기능 명확화    |
| **41** | 2025‑07‑02 | Parser DTO 클래스 추가·수정   | `GetParameterValuesResponse.kt` DTO 한 개               | `InformResponseDto.kt`,<br>`InformRequestBuilder.kt` 추가,<br>`GetParameterValuesResponse.kt` 제거 | DTO 구조 명확화∙추가  |
| **42** | 2025‑07‑02 | 서비스 클래스 기능 확장          | `AgentService.kt` 포그라운드 서비스<br>(알림 표시)                | 포그라운드 서비스<br>(알림 표시 + Inform 주기 관리)                                                            | 서비스 역할 확장      |
| **43** | 2025‑07‑02 | 비즈니스 로직 클래스 추가         | *(비즈니스 로직; 현재 미구현)*                                   | `ReportInformUseCase.kt` 추가<br>(Inform 전송 비즈니스 로직)                                             | 신규 클래스 추가      |
| **44** | 2025‑07‑02 | 테스트 클래스 추가·구체화         | (명시 없음)                                               | `TR069ClientTest.kt`,<br>`TR069ResponseParserTest.kt` 추가                                       | 테스트 명시화        |
| **45** | 2025‑07‑02 | ACS 서버 연결·데이터 보고 상태 변경 | Inform 기능 구현 (진행 중)                                   | Inform 기능 구현 완료,<br>테스트·검증 단계 진행 중                                                             | 단계별 상태 명확화     |
| **46** | 2025‑07‑02 | `generated` 디렉토리 명시    | (명시 없음)                                               | `java (generated)` 및<br>`res (generated)` 디렉토리 명시                                              | 자동 생성 디렉토리 명확화 |
| **47** | 2025‑07‑02 | OTA 업데이트 단계 세부화        | 단계만 추가                                                | OTA 프로세스 설계, 다운로드,<br>무결성 검증, 설치 및 재부팅                                                         | 단계 세부화         |
| **48** | 2025‑07‑02 | 테스트·시연 단계 번호 변경        | 통합 테스트(11), 시연 준비(12)                                 | 단위 테스트(10), 통합 테스트·디버깅(11),<br>시연 준비(12)                                                       | 단계 번호 조정       |
| **49** | 2025-07-04 | 신규 개발 단계 추가     | 총 12단계                         | 총 14단계<br>(TR-369 프로토콜 전환 추가)               | 신규 단계 추가    |
| **50** | 2025-07-04 | 단계 순서 변경        | 단계 4: OS 정보 수집, 단계 5: BOOT 이벤트 | 단계 4: BOOT 이벤트, 단계 6: OS 정보 수집              | 단계 우선순위 조정  |
| **51** | 2025-07-04 | TR-369 프로토콜 세부화 | (명시 없음)                        | TR-069 기능 전체를 TR-369 프로토콜(WebSocket)로 전환 명시 | 프로토콜 명확화    |
| **52** | 2025-07-04 | 향후 고려사항 상세화     | 벤더 최적화, 성능 및 보안 최적화 등 포괄적      | 멀티모듈 아키텍처 도입, 프로토콜 고도화 및 확장성 시스템 구축 명시      | 향후 계획 상세화   |
| **53** | 2025-07-04 | 프로젝트 구조 단순화     | kotlin+java 디렉토리 병행 사용         | java 디렉토리 단일 사용                             | 디렉토리 구조 간소화 |
| **54** | 2025‑07‑07 | TR-369 프로토콜 통신 방식 변경 | WebSocket 방식       | **MQTT 방식**                                 | 통신 프로토콜 변경  |
| **55** | 2025‑07‑07 | 단계 5 세부 작업 수정        | WebSocket 구현 및 테스트 | MQTT 브로커 연결, Publish/Subscribe 구현 및 안정성 테스트 | 세부 구현 방식 수정 |
| **56** | 2025‑07‑07 | 단계별 테스트 환경 가능성 구체화   | (명시 없음)            | 에뮬레이터 및 실제 기기 환경에서의 가능 여부와 제한 사항 구체화        | 테스트 환경 명시화  |
| **57** | 2025‑07‑07 | 프로젝트 최종 목표 명확화       | IP 기반 기기 모니터링 및 제어 | IP 기반 기기 모니터링 및 제어(**MQTT 기반 TR-369 프로토콜**) | 목표 프로토콜 명확화 |
| **58** | 2025-07-10 | MQTT 브로커 정보 명시화     | MQTT 브로커 정보 간략 명시 (`주소 미기재`)        | **주소:** [http://aromit.iptime.org:18083](http://aromit.iptime.org:18083) (EMQX 5.7)<br>**로그인:** admin / aromit123 | MQTT 정보 명확화  |
| **59** | 2025-07-10 | MQTT 토픽 구조 추가       | (명시 없음)                             | 상태 보고: `usp/agent/{deviceUuid}/inform`<br>명령 수신: `usp/agent/{deviceUuid}/command`                                 | MQTT 토픽 구체화  |
| **60** | 2025-07-10 | 단계 5 세부 실행 절차 세분화   | "MQTT 기반 TR-369 전환 및 안정성 테스트" 간략 서술 | Gradle 환경 설정, USP proto 정의, MQTT 네트워크 검증, USP 메시지 구현, MQTT Publish/Subscribe 단위 테스트 등 총 12개 세부 작업으로 명확히 구분        | 5단계 작업 상세화   |
| **61** | 2025-07-10 | 단계 5 세부 작업 상태 표기 추가 | (명시 없음)                             | 단계별 세부 작업별 진행 상태(⬜ 예정)를 명확히 표기                                                                                    | 단계별 진행 상태 관리 |
| **62** | 2025‑07‑11 | 프로젝트 최종 목표 명확화            | MQTT 기반 TR-369 프로토콜 모니터링 및 제어    | MQTT 기반 TR-369(**USP**) 프로토콜 **완전 구현**                                                                                 | 최종 목표 명확화 및 USP 명시 |
| **63** | 2025‑07‑11 | 단계 제목 명칭 변경               | MQTT 기반 TR-369 프로토콜 전환           | MQTT 기반 TR-369(**USP**) 프로토콜 전환                                                                                        | 단계 명칭에 USP 추가      |
| **64** | 2025‑07‑11 | MQTT 구현 로직 보완             | MQTT 연결 성공 및 로그 확인 수준            | MQTT 연결 직후 `commandTopic` 자동 구독 및 리스너 범위 확장 (`MqttManager.kt`)                                                         | MQTT 기능 구체화        |
| **65** | 2025‑07‑11 | 서비스 로직 보완                 | MQTT 통신 및 메시지 주기적 전송 구현          | MQTT 연결(init/connect/disconnect)을 서비스 라이프사이클과 연동 (`AgentService.kt`)                                                   | 서비스 라이프사이클 연동      |
| **66** | 2025‑07‑11 | 디바이스 UUID 처리 로직 추가        | UUID 설정 및 MQTT 토픽 일관성 점검 (일반 설명) | 디바이스 UUID 초기화 로직(`initDeviceUuid()`) 구현 (`Config.kt`)                                                                  | UUID 초기화 명시        |
| **67** | 2025‑07‑11 | USP 프로토콜 메시지 변환 구현        | USP 메시지 빌드 및 파싱 로직 초안 수준         | `UspTr069Converter` 양방향 매핑 구현 완료 (TR-069 ↔ USP)                                                                        | 프로토콜 변환 명확화        |
| **68** | 2025‑07‑11 | 신규 USP 관련 파일 추가           | (없음)                             | `UspSessionUseCase.kt`,<br>`UspMessageDispatcher.kt`,<br>`UspParser.kt` 신규 추가                                          | USP 모듈 신설          |
| **69** | 2025‑07‑11 | 단계 6 OS 정보 수집 구현 명확화      | CPU, 메모리, 저장 공간 등 정보 전송 (간략)     | `DeviceStatsProvider.kt`, `DeviceStatsMapper.kt` 추가 및 AgentService 연동 명확화                                              | OS 정보 수집 세부화       |
| **70** | 2025‑07‑11 | 단계 7 OTA 펌웨어 구현 명확화       | OTA 설계, 설치 및 재부팅 (간략)            | `OtaManager.kt`, `OtaJob.kt`, `OtaRepository.kt` 추가,<br>`TR069Command.kt` 클래스 세부화                                      | OTA 세부 클래스 명시      |
| **71** | 2025‑07‑11 | 단계 8 앱 연동 인터페이스 구현 명확화    | 설치 앱 조회 및 상태 응답 구현 (일반 설명)       | `TvAppController.kt`, `AppInfoMapper.kt` 추가 명시 및 TR-069 메시지 연동 명시                                                      | 앱 연동 클래스 명시        |
| **72** | 2025‑07‑11 | 단계 9 Intent 앱 연동 구현 구체화   | Intent 기반 앱 제어 (일반 설명)           | `IntentCommand.kt`, `CommandBroadcastReceiver.kt`,<br>`TvAppController.sendCommand()` 추가 명시                            | Intent 연동 명확화      |
| **73** | 2025‑07‑11 | 단계 10 보조 앱 세부 구현 명확화      | Agent ↔ 보조 앱 XML 통신 (간략)         | `CompanionService` 자동 실행 명시 및 `CommandBroadcastReceiver` 재사용,<br>모듈 분리 명시                                              | 보조 앱 구조 명확화        |
| **74** | 2025‑07‑11 | 단계 11 ACS 명령 처리 확장 구현 명확화 | ACS Get/Set/재부팅 명령 구현 (일반 설명)    | `AddObject`, `DeleteObject` 등 RPC 명령 확장,<br>`CommandExecutor.kt` 디스패처 추가                                               | 명령 처리 세부화          |
| **75** | 2025‑07‑11 | 단계 12 단위 테스트 구현 명확화       | 각 모듈별 단위 테스트 (일반 설명)             | `TR069RequestBuilderTest.kt`, `MqttManagerTest.kt` 추가,<br>Mock 라이브러리(`mockk`) 사용 명시                                    | 단위 테스트 세부화         |
| **76** | 2025‑07‑11 | 단계 13 통합 테스트 구현 명확화       | 통합 테스트 시나리오 (일반 설명)              | `IntegrationSuite.kt` 추가 및 Docker 기반 EMQX, WireMock 환경 구축 명확화                                                          | 통합 테스트 환경 명시       |
| **77** | 2025‑07‑11 | 단계 14 시연 준비 구체화           | 시연 시나리오 및 환경 구성 (간략)             | `/demo/mock_acs_responses/*.xml`, `/demo/usp_samples/*.bin`,<br>`scripts/run_demo.sh`, `docs/demo_scenario.md` 등 파일 명시 | 시연 자료 명확화          |
| **78** | 2025‑07‑11 | 향후 고려사항 구체화               | 유지보수 일반 항목 (간략)                  | 멀티모듈 분리, R8 난독화 및 ProGuard, TLS 의무화, targetSdk 권한 대응 명시                                                                | 유지보수 계획 상세화        |
| **79** | 2025‑07‑11 | 프로젝트 최종 목표 변경           | MQTT 기반 TR-369 프로토콜 구현                               | MQTT 기반 TR‑369(**USP**) 프로토콜로 전환하고, TR‑069 기능은 **런타임에서 완전 비활성화** 처리                            | Legacy 처리 명시      |
| **80** | 2025‑07‑11 | 모듈 구조 변경                | `:app` 모듈 단일 구조                                      | `:agent-core`, `:network-mqtt`, `:protocol-usp`, `:protocol-tr069-legacy`로 멀티모듈 구조화            | 구조 세분화 및 확장성 강화   |
| **81** | 2025‑07‑11 | TR‑069 코드 Legacy 처리 명확화 | 기존 TR‑069 클래스(`Tr069Client`, `AcsConnectionManager`) | 모든 TR‑069 클래스는 `@Deprecated`, `@Disabled("legacy")` 처리 후 **빌드 제외** 설정                          | TR‑069 완전 비활성화 명시 |
| **82** | 2025‑07‑11 | MQTT 브로커 설정 보안 강화       | MQTT 브로커 주소(http, 기본 포트)                             | MQTT 브로커 주소에 **TLS(mqtts\://)** 적용, 포트(8883) 명시                                                | 통신 보안 강화          |
| **83** | 2025‑07‑11 | MQTT 구현 로직 추가 보완        | MQTT 기본 연결·구독 로직                                     | MQTT 연결 직후 `commandTopic` 자동 구독 및 리스너 범위 확장 (`MqttManager.kt`) 추가 명시                           | MQTT 연결 안정성 향상    |
| **84** | 2025‑07‑11 | 신규 USP 관련 클래스 추가        | (없음)                                                 | `UspSessionUseCase.kt`, `UspMessageDispatcher.kt`, `UspParser.kt` 클래스 신규 추가 명시                 | USP 메시지 처리 강화     |
| **85** | 2025‑07‑11 | OTA 업데이트 구조 명확화         | OTA 명령 처리 클래스(`TR069Command.kt`)                     | USP 전용 OTA 명령 처리 클래스 `UspOtaCommand.kt`, 관리 클래스(`OtaManager`, `OtaJob`, `OtaRepository`) 추가 명시 | OTA 기능 USP 기반 재설계 |
| **86** | 2025‑07‑11 | Intent 기반 앱 연동 명확화      | 앱 연동 및 Intent 사용 간략 서술                               | `IntentCommand.kt`, `CommandBroadcastReceiver.kt`, `TvAppController.sendCommand()` 추가 명시       | Intent 기반 기능 명확화  |
| **87** | 2025‑07‑11 | 보조 앱(companion) 모듈 명확화  | 보조 앱 기능 간략 언급                                        | 보조 앱을 별도 모듈(`:companion`)로 구성, `CompanionService` 및 `CommandBroadcastReceiver` 재사용 명시          | 독립성 및 재사용성 명확화    |
| **88** | 2025‑07‑11 | USP RPC 명령 처리 범위 명확화    | USP 명령 처리(일부 명령)                                     | `Add`, `Delete`, `Operate`, `Set`, `Get` 등 USP RPC 명령 처리 명확화(`CommandExecutor.kt`)             | 명령 처리 범위 상세화      |
| **89** | 2025‑07‑11 | 테스트 환경 USP 전환 명확화       | TR‑069 및 USP 혼합 테스트 환경                               | USP 전용 테스트 환경(Docker EMQX, USP Test Harness 컨테이너) 명시                                           | 테스트 환경 전환         |
| **90** | 2025‑07‑11 | 시연 환경 USP 전환 명확화        | TR‑069, USP 혼합 환경                                    | USP 예제 파일(`/demo/usp_samples/*.bin`), USP 전용 시연 스크립트(`run_demo.sh`) 제공 명시                      | 시연 환경 USP 전환      |
| **91** | 2025‑07‑11 | 향후 고려·보완 사항 상세화         | 간략한 유지보수 계획 언급                                       | **멀티모듈 분리**, **R8 난독화**, **TLS 의무화**, **targetSdk 36 권한 대응**, **벤더별 플러그인 구조** 등 구체적 명시         | 유지보수 및 확장성 상세화    |
